#!/usr/bin/env python
import rospy
import socket
import SocketServer
import SimpleHTTPServer

rospy.init_node('web_server_node')
rospy.loginfo('Inside web_server script')

HOST = socket.gethostname()
PORT = 8080
address = ("", PORT)


class RequestHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):
    def do_GET(self):
        if self.path.startswith("/beverage"):
            info = self.path.strip("/")[9:]
            x, y = info.split("&")
            print "{}\n{}".format(x, y)
        else:
            pass
        return SimpleHTTPServer.SimpleHTTPRequestHandler.do_GET(self)

SocketServer.TCPServer.allow_reuse_address=True
httpd = SocketServer.TCPServer(address, RequestHandler)

print("serving at port", PORT)
httpd.serve_forever()
httpd.shutdown()